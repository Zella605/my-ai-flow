<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Vision Sync 5.0 | Ê∑±Â∫¶ÁÅµÊÑüÁ´ô</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 text-slate-900 font-sans">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const App = () => {
            const [view, setView] = useState('brainstorm');
            const [scrapedData, setScrapedData] = useState([]);
            const [manualData, setManualData] = useState(() => {
                const saved = localStorage.getItem('zella-manual-v5');
                return saved ? JSON.parse(saved) : [];
            });
            const [votes, setVotes] = useState(() => {
                const saved = localStorage.getItem('zella-votes-v5');
                return saved ? JSON.parse(saved) : {};
            });

            // ÊâãÂä®‰∏ä‰º†Ë°®ÂçïÁä∂ÊÄÅ
            const [form, setForm] = useState({ url: '', img: '', note: '' });
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                fetch('./data.json').then(res => res.json()).then(json => {
                    setScrapedData(json);
                    setLoading(false);
                }).catch(() => setLoading(false));
            }, []);

            useEffect(() => {
                localStorage.setItem('zella-manual-v5', JSON.stringify(manualData));
                localStorage.setItem('zella-votes-v5', JSON.stringify(votes));
            }, [manualData, votes]);

            const handleAddLink = () => {
                if (!form.url) return;
                const newIdea = {
                    id: `manual-${Date.now()}`,
                    title: `ÊâãÂä®ÊçïËé∑ÁÅµÊÑü`,
                    likes: "NEW",
                    source: "MANUAL",
                    url: form.url,
                    imageUrl: form.img || "https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?w=400",
                    note: form.note || "ÊöÇÊó†Ê∑±Â∫¶ËØ¥Êòé",
                    status: 'pending'
                };
                setManualData([newIdea, ...manualData]);
                setForm({ url: '', img: '', note: '' });
            };

            const handleVote = (id) => {
                setVotes(prev => ({ ...prev, [id]: (prev[id] || 0) + 1 }));
            };

            const allIdeas = useMemo(() => {
                return [...manualData, ...scrapedData].sort((a, b) => (votes[b.id] || 0) - (votes[a.id] || 0));
            }, [scrapedData, manualData, votes]);

            return (
                <div className="min-h-screen pb-20">
                    <nav className="bg-white/80 backdrop-blur-xl border-b px-8 py-4 flex justify-between items-center sticky top-0 z-50">
                        <div className="flex items-center gap-3">
                            <div className="bg-indigo-600 text-white px-2 py-1 rounded-lg font-black text-xs shadow-lg shadow-indigo-200">ZELLA v5</div>
                            <h1 className="font-black text-slate-800 tracking-tighter uppercase">AI Vision Sync</h1>
                        </div>
                        <div className="bg-slate-100 rounded-2xl p-1 flex">
                            <button onClick={() => setView('brainstorm')} className={`px-6 py-2 rounded-xl text-xs font-black transition-all ${view === 'brainstorm' ? 'bg-white text-indigo-600 shadow-sm' : 'text-slate-400'}`}>ÁÅµÊÑüÊ±†</button>
                            <button onClick={() => setView('roadmap')} className={`px-6 py-2 rounded-xl text-xs font-black transition-all ${view === 'roadmap' ? 'bg-white text-indigo-600 shadow-sm' : 'text-slate-400'}`}>ÊéíÊúüÁúãÊùø</button>
                        </div>
                    </nav>

                    <main className="max-w-5xl mx-auto mt-10 px-6">
                        {view === 'brainstorm' ? (
                            <div className="animate-in fade-in slide-in-from-bottom-6 duration-700">
                                
                                {/* Ê∑±Â∫¶‰∏ä‰º†Ë°®Âçï */}
                                <div className="bg-white rounded-[2.5rem] border border-slate-100 p-8 mb-12 shadow-sm relative overflow-hidden">
                                    <h3 className="font-black text-slate-800 text-lg mb-6 flex items-center gap-2">
                                        <span className="text-2xl text-indigo-500">+</span> Êñ∞Â¢ûÊ∑±Â∫¶ÁÅµÊÑüÂΩïÂÖ•
                                    </h3>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div className="space-y-4">
                                            <input 
                                                value={form.url} 
                                                onChange={e => setForm({...form, url: e.target.value})}
                                                placeholder="Á≤òË¥¥ÂéüÂßãÈìæÊé• (TikTok/Â∞èÁ∫¢‰π¶...)"
                                                className="w-full bg-slate-50 border-none rounded-2xl px-5 py-3.5 text-sm focus:ring-2 ring-indigo-500 transition-all"
                                            />
                                            <input 
                                                value={form.img} 
                                                onChange={e => setForm({...form, img: e.target.value})}
                                                placeholder="ÂõæÁâáÂú∞ÂùÄ (ÂèØÂè≥ÈîÆÂ§çÂà∂ÁΩëÈ°µÂõæÁâáÂú∞ÂùÄ)"
                                                className="w-full bg-slate-50 border-none rounded-2xl px-5 py-3.5 text-sm focus:ring-2 ring-indigo-500 transition-all"
                                            />
                                        </div>
                                        <div className="space-y-4">
                                            <textarea 
                                                value={form.note} 
                                                onChange={e => setForm({...form, note: e.target.value})}
                                                placeholder="Âú®Ê≠§ËæìÂÖ•ÁÅµÊÑüËØ¥ÊòéÔºö‰æãÂ¶Ç„ÄåÁ≤íÂ≠êÊ∂àÊï£ÁâπÊïàÔºåÈÄÇÂêàÁæéÂ¶ÜÁ±ªÁõÆ„Äç"
                                                className="w-full h-full min-h-[110px] bg-slate-50 border-none rounded-2xl px-5 py-3.5 text-sm focus:ring-2 ring-indigo-500 transition-all resize-none"
                                            />
                                        </div>
                                    </div>
                                    <button 
                                        onClick={handleAddLink}
                                        className="w-full mt-6 bg-slate-900 text-white py-4 rounded-2xl font-black text-sm hover:bg-indigo-600 transition-all active:scale-[0.98] shadow-xl shadow-slate-200"
                                    >
                                        Êèê‰∫§Âπ∂ÂêåÊ≠•Ëá≥ÁÅµÊÑüÊ±†
                                    </button>
                                </div>

                                {/* Âç°ÁâáÁÄëÂ∏ÉÊµÅ */}
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    {allIdeas.map((item, index) => (
                                        <div key={item.id} className="bg-white border border-slate-100 rounded-[2.5rem] overflow-hidden hover:shadow-2xl transition-all group flex flex-col shadow-sm border-b-4 border-b-slate-200 hover:border-b-indigo-500">
                                            {/* ÂõæÁâáÂ∞ÅÈù¢ */}
                                            <div className="h-64 overflow-hidden relative">
                                                <img src={item.imageUrl} className="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700" />
                                                <div className="absolute top-4 left-4 bg-white/90 backdrop-blur px-3 py-1 rounded-full shadow-sm text-[9px] font-black uppercase tracking-widest">
                                                    #{index + 1} {item.source}
                                                </div>
                                                <a href={item.url} target="_blank" className="absolute top-4 right-4 bg-black/50 hover:bg-black text-white p-2 rounded-full backdrop-blur opacity-0 group-hover:opacity-100 transition-opacity">
                                                    ‚Üó
                                                </a>
                                            </div>

                                            {/* ÂÜÖÂÆπÂå∫ */}
                                            <div className="p-6 flex-1 flex flex-col justify-between">
                                                <div>
                                                    <h4 className="font-black text-slate-800 text-lg mb-2 line-clamp-1">{item.title}</h4>
                                                    <div className="bg-slate-50 p-4 rounded-2xl border border-slate-100 mb-4">
                                                        <p className="text-slate-500 text-xs font-bold leading-relaxed italic">
                                                            ‚Äú {item.note || "ËØ•ÁÅµÊÑüÁõÆÂâçÁî±Êú∫Âô®‰∫∫Ëá™Âä®ÊäìÂèñÔºåÊöÇÊó†Ê∑±Â∫¶ËØ¥ÊòéÂÜÖÂÆπ„ÄÇ"} ‚Äù
                                                        </p>
                                                    </div>
                                                </div>
                                                
                                                <div className="flex justify-between items-center mt-4">
                                                    <div className="flex items-center gap-2">
                                                        <span className="text-rose-500 text-xs font-black tracking-tighter">LIKES: {item.likes}</span>
                                                    </div>
                                                    <button 
                                                        onClick={() => handleVote(item.id)}
                                                        className="bg-indigo-50 text-indigo-600 px-6 py-2.5 rounded-xl font-black text-xs hover:bg-indigo-600 hover:text-white transition-all active:scale-90 flex items-center gap-2"
                                                    >
                                                        üî• Êäï‰∏ÄÁ•® <span className="bg-white/20 px-1.5 rounded">{votes[item.id] || 0}</span>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        ) : (
                            <div className="text-center py-40 font-black text-slate-200 text-6xl italic uppercase opacity-20 select-none">Under Construction</div>
                        )}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
