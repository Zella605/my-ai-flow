<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Vision Sync 3.6 | è‡ªåŠ¨ç«žæ¦œç‰ˆ</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 text-slate-900 font-sans">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const App = () => {
            const [view, setView] = useState('brainstorm');
            const [ideas, setIdeas] = useState([]);
            const [votes, setVotes] = useState(() => {
                const saved = localStorage.getItem('ai-flow-votes-v3.6');
                return saved ? JSON.parse(saved) : {};
            });
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                fetch('./data.json')
                    .then(res => res.json())
                    .then(json => {
                        setIdeas(json.map(item => ({
                            ...item,
                            status: item.status || 'pending',
                            type: item.type || 'hotspot'
                        })));
                        setLoading(false);
                    })
                    .catch(err => {
                        console.error("Data load failed", err);
                        setLoading(false);
                    });
            }, []);

            useEffect(() => {
                localStorage.setItem('ai-flow-votes-v3.6', JSON.stringify(votes));
            }, [votes]);

            // ðŸ—³ï¸ æŠ•ç¥¨é€»è¾‘
            const handleVote = (id, e) => {
                e.preventDefault();
                e.stopPropagation();
                setVotes(prev => ({
                    ...prev,
                    [id]: (prev[id] || 0) + 1
                }));
            };

            const toggleApprove = (id, e) => {
                e.preventDefault();
                e.stopPropagation();
                setIdeas(ideas.map(i => i.id === id ? { ...i, status: i.status === 'approved' ? 'pending' : 'approved' } : i));
            };

            // ðŸš€ æ ¸å¿ƒé€»è¾‘ï¼šæ ¹æ®æŠ•ç¥¨æ•°è¿›è¡Œè‡ªåŠ¨æŽ’åº
            const sortedIdeas = useMemo(() => {
                return [...ideas].sort((a, b) => {
                    const votesA = votes[a.id] || 0;
                    const votesB = votes[b.id] || 0;
                    // å¦‚æžœç¥¨æ•°ç›¸åŒï¼Œåˆ™ä¿æŒåŽŸå§‹æŠ“å–é¡ºåº
                    return votesB - votesA;
                });
            }, [ideas, votes]);

            const maxVotes = Math.max(...Object.values(votes), 0);
            const dailyItems = ideas.filter(i => i.status === 'approved' && i.type === 'longterm');
            const hotItems = ideas.filter(i => i.status === 'approved' && i.type === 'hotspot');

            return (
                <div className="min-h-screen pb-10">
                    <nav className="bg-white/90 backdrop-blur-md border-b px-6 py-4 flex justify-between items-center sticky top-0 z-50 shadow-sm">
                        <div className="flex items-center gap-2">
                            <div className="bg-indigo-600 text-white p-1 rounded font-black text-[10px] w-12 text-center
