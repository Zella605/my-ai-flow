<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Vision Sync 9.0 | Á†îÂèëÈó≠ÁéØÁâà</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .action-btns { opacity: 0; transition: all 0.2s; }
        .group:hover .action-btns { opacity: 1; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 font-sans">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const App = () => {
            const [view, setView] = useState('brainstorm');
            const [scrapedData, setScrapedData] = useState([]);
            const [manualData, setManualData] = useState(() => {
                const saved = localStorage.getItem('zella-v9-manual');
                return saved ? JSON.parse(saved) : [];
            });
            const [votes, setVotes] = useState(() => {
                const saved = localStorage.getItem('zella-v9-votes');
                return saved ? JSON.parse(saved) : {};
            });
            const [deletedIds, setDeletedIds] = useState(() => {
                const saved = localStorage.getItem('zella-v9-deleted');
                return saved ? JSON.parse(saved) : [];
            });
            
            // üöÄ Êñ∞Â¢ûÔºöÁ†îÂèëËøõÂ∫¶Êï∞ÊçÆ
            const [roadmap, setRoadmap] = useState(() => {
                const saved = localStorage.getItem('zella-v9-roadmap');
                return saved ? JSON.parse(saved) : [];
            });

            const [form, setForm] = useState({ url: '', imgs: '', note: '', title: '' });

            useEffect(() => {
                fetch('./data.json').then(res => res.json()).then(json => {
                    setScrapedData(json);
                }).catch(() => console.log("JSON load error"));
            }, []);

            useEffect(() => {
                localStorage.setItem('zella-v9-manual', JSON.stringify(manualData));
                localStorage.setItem('zella-v9-votes', JSON.stringify(votes));
                localStorage.setItem('zella-v9-deleted', JSON.stringify(deletedIds));
                localStorage.setItem('zella-v9-roadmap', JSON.stringify(roadmap));
            }, [manualData, votes, deletedIds, roadmap]);

            // üóëÔ∏è Âà†Èô§ÈÄªËæë
            const handleDelete = (id) => {
                if(!confirm("Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™ÁÅµÊÑüÂêóÔºü")) return;
                if(id.startsWith('manual-')) {
                    setManualData(manualData.filter(item => item.id !== id));
                } else {
                    setDeletedIds([...deletedIds, id]);
                }
            };

            // üöÄ Êñ∞Â¢ûÔºöPick ÈÄªËæëÔºàÂä†ÂÖ•Á†îÂèëËøõÂ∫¶Ôºâ
            const handlePick = (item) => {
                if (roadmap.find(r => r.id === item.id)) {
                    alert("ËØ•ÁÅµÊÑüÂ∑≤Âú®Á†îÂèëÊ∏ÖÂçï‰∏≠ÔºÅ");
                    return;
                }
                const newTask = {
                    ...item,
                    progress: 10, // ÂàùÂßãËøõÂ∫¶
                    pickDate: new Date().toLocaleDateString()
                };
                setRoadmap([newTask, ...roadmap]);
                alert("Â∑≤ÂêåÊ≠•Ëá≥Á†îÂèëËøõÂ∫¶Èù¢ÊùøÔºÅ");
            };

            const allIdeas = useMemo(() => {
                const combined = [...manualData, ...scrapedData.map(d => ({...d, images: [d.imageUrl], note: "Êú∫Âô®‰∫∫Ëá™Âä®ÊäìÂèñ"}))];
                return combined
                    .filter(item => !deletedIds.includes(item.id))
                    .sort((a, b) => (votes[b.id] || 0) - (votes[a.id] || 0));
            }, [scrapedData, manualData, votes, deletedIds]);

            return (
                <div className="min-h-screen pb-20">
                    <nav className="bg-white/80 backdrop-blur-md border-b px-6 py-4 sticky top-0 z-50 flex justify-between items-center">
                        <div className="flex items-center gap-2">
                            <span className="bg-indigo-600 text-white px-2 py-0.5 rounded font-black text-[10px]">ZELLA PRO</span>
                            <h1 className="font-black text-slate-800 tracking-tighter uppercase">AI Workflow</h1>
                        </div>
                        <div className="flex gap-2 bg-slate-100 p-1 rounded-xl shadow-inner">
                            <button onClick={() => setView('brainstorm')} className={`px-6 py-2 rounded-lg text-xs font-black transition-all ${view === 'brainstorm' ? 'bg-white shadow text-indigo-600' : 'text-slate-400 hover:text-slate-600'}`}>ÁÅµÊÑüÊ±†</button>
                            <button onClick={() => setView('roadmap')} className={`px-6 py-2 rounded-lg text-xs font-black transition-all ${view === 'roadmap' ? 'bg-white shadow text-indigo-600' : 'text-slate-400 hover:text-slate-600'}`}>Á†îÂèëËøõÂ∫¶ ({roadmap.length})</button>
                        </div>
                    </nav>

                    <main className="max-w-[1400px] mx-auto mt-8 px-6">
                        {view === 'brainstorm' ? (
                            <div className="space-y-10 animate-in fade-in slide-in-from-bottom-4">
                                {/* ÂΩïÂÖ•Èù¢Êùø */}
                                <div className="bg-slate-900 rounded-[2.5rem] p-8 shadow-2xl">
                                    <div className="grid grid-cols-1 lg:grid-cols-4 gap-4">
                                        <input value={form.title} onChange={e=>setForm({...form, title:e.target.value})} placeholder="ÁÅµÊÑüÊ†áÈ¢ò" className="bg-white/10 text-white border-none rounded-2xl px-5 py-4 text-sm outline-none focus:ring-2 ring-indigo-500"/>
                                        <input value={form.url} onChange={e=>setForm({...form, url:e.target.value})} placeholder="ÂèÇËÄÉÈìæÊé•" className="bg-white/10 text-white border-none rounded-2xl px-5 py-4 text-sm outline-none focus:ring-2 ring-indigo-500"/>
                                        <input value={form.imgs} onChange={e=>setForm({...form, imgs:e.target.value})} placeholder="ÂõæÁâáÂú∞ÂùÄ(Â§öÂº†ÈÄóÂè∑ÈöîÂºÄ)" className="bg-white/10 text-white border-none rounded-2xl px-5 py-4 text-sm outline-none focus:ring-2 ring-indigo-500"/>
                                        <button onClick={() => {
                                            const imgArray = form.imgs.split(/[,Ôºå\n]/).map(i => i.trim()).filter(i => i);
                                            const newIdea = { id: `manual-${Date.now()}`, title: form.title || "Êú™ÂëΩÂêçÁÅµÊÑü", source: "MANUAL", url: form.url, images: imgArray.length > 0 ? imgArray : ["https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?w=800"], note: form.note || "ÊöÇÊó†Â§áÊ≥®ËØ¥Êòé" };
                                            setManualData([newIdea, ...manualData]);
                                            setForm({ url: '', imgs: '', note: '', title: '' });
                                        }} className="bg-indigo-500 text-white rounded-2xl font-black text-sm hover:bg-indigo-400 transition-all shadow-lg shadow-indigo-500/20">Ê∑ªÂä†ÁÅµÊÑü</button>
                                        <textarea value={form.note} onChange={e=>setForm({...form, note:e.target.value})} placeholder="ËæìÂÖ•Ê∑±Â∫¶ËØ¥Êòé..." className="lg:col-span-4 bg-white/10 text-white border-none rounded-2xl px-5 py-4 text-sm h-20 outline-none focus:ring-2 ring-indigo-500 resize-none"/>
                                    </div>
                                </div>

                                {/* ÁÅµÊÑüÂàóË°® */}
                                <div className="space-y-8">
                                    {allIdeas.map((item, idx) => (
                                        <div key={item.id} className="group bg-white border border-slate-100 rounded-[3rem] flex flex-col md:flex-row h-auto md:h-[400px] relative overflow-hidden hover:shadow-2xl transition-all border-b-8 border-b-slate-100 hover:border-b-indigo-500">
                                            
                                            {/* Êìç‰ΩúÊåâÈíÆÁªÑ */}
                                            <div className="action-btns absolute top-6 right-6 z-20 flex gap-2">
                                                <button onClick={() => handlePick(item)} className="bg-emerald-500 text-white px-4 py-2 rounded-full text-[10px] font-black shadow-lg hover:scale-110 transition-all">PICK üöÄ</button>
                                                <button onClick={() => handleDelete(item.id)} className="bg-rose-100 text-rose-500 p-2 rounded-full hover:bg-rose-500 hover:text-white transition-all shadow-sm">‚úï</button>
                                            </div>

                                            {/* Â∑¶‰æßÊñáÂ≠óÂå∫ */}
                                            <div className="w-full md:w-[340px] p-10 flex flex-col justify-between shrink-0 bg-white border-r border-slate-50">
                                                <div>
                                                    <div className="flex items-center gap-2 mb-6">
                                                        <span className="text-[10px] font-black bg-indigo-50 text-indigo-600 px-3 py-1 rounded-full uppercase tracking-widest">#{idx+1} {item.source}</span>
                                                    </div>
                                                    <h3 className="font-black text-2xl text-slate-800 mb-6 leading-tight">{item.title}</h3>
                                                    <div className="bg-slate-50 p-5 rounded-[2rem] border border-slate-100 shadow-inner">
                                                        <p className="text-slate-500 text-[11px] font-medium leading-relaxed italic">‚Äú{item.note}‚Äù</p>
                                                    </div>
                                                </div>
                                                <div className="mt-8 flex items-center justify-between">
                                                    <a href={item.url} target="_blank" className="text-[10px] font-black text-slate-400 hover:text-indigo-600 transition-colors uppercase tracking-widest">Link ‚Üó</a>
                                                    <button onClick={() => setVotes(v => ({...v, [item.id]: (v[item.id]||0)+1}))} className="flex items-center gap-2 font-black text-slate-800 text-sm">
                                                        <span className="text-xl">üî•</span> {votes[item.id] || 0}
                                                    </button>
                                                </div>
                                            </div>

                                            {/* Âè≥‰æßÁîªÂªä */}
                                            <div className="flex-1 overflow-x-auto hide-scrollbar flex gap-6 p-6 bg-slate-50/30 items-center">
                                                {item.images.map((img, i) => (
                                                    <div key={i} className="h-full shrink-0 rounded-[2rem] overflow-hidden shadow-md border-4 border-white">
                                                        <img src={img} className="h-full w-auto object-contain bg-white" />
                                                    </div>
                                                ))}
                                                <div className="w-10 shrink-0"></div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        ) : (
                            <div className="animate-in slide-in-from-right-10 duration-500">
                                <h2 className="text-4xl font-black text-slate-800 mb-10 tracking-tighter italic">ON-GOING ROADMAP</h2>
                                {roadmap.length === 0 ? (
                                    <div className="py-20 text-center bg-white rounded-[3rem] border-4 border-dashed border-slate-200">
                                        <p className="text-slate-300 font-black text-2xl uppercase">ÊöÇÊó†ËøõË°å‰∏≠ÁöÑÁ†îÂèëÈ°πÁõÆ</p>
                                        <button onClick={() => setView('brainstorm')} className="mt-4 text-indigo-500 font-bold hover:underline">ÂâçÂéª Pick ÁÅµÊÑü ‚Üí</button>
                                    </div>
                                ) : (
                                    <div className="grid grid-cols-1 gap-6">
                                        {roadmap.map((task) => (
                                            <div key={task.id} className="bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 flex items-center gap-8 group">
                                                <div className="w-32 h-32 rounded-[2rem] overflow-hidden shrink-0 shadow-inner">
                                                    <img src={task.images[0]} className="w-full h-full object-cover" />
                                                </div>
                                                <div className="flex-1">
                                                    <div className="flex justify-between items-center mb-2">
                                                        <h3 className="font-black text-xl text-slate-800">{task.title}</h3>
                                                        <span className="text-xs font-mono text-slate-400">PICKED AT: {task.pickDate}</span>
                                                    </div>
                                                    {/* Ê®°ÊãüËøõÂ∫¶Êù° */}
                                                    <div className="w-full bg-slate-100 h-6 rounded-full overflow-hidden p-1 shadow-inner">
                                                        <div className="bg-emerald-500 h-full rounded-full transition-all duration-1000 shadow-lg shadow-emerald-200" style={{width: `${task.progress}%`}}></div>
                                                    </div>
                                                    <div className="flex justify-between mt-2">
                                                        <span className="text-[10px] font-black text-emerald-600 uppercase tracking-tighter">Status: In Progress</span>
                                                        <button 
                                                            onClick={() => setRoadmap(roadmap.filter(r => r.id !== task.id))}
                                                            className="text-[10px] font-black text-rose-400 hover:text-rose-600 uppercase"
                                                        >
                                                            ÁßªÈô§È°πÁõÆ
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        )}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
